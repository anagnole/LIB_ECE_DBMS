{% extends "global_layout.html" %}
{% block content %}
<div class="container">
    {% include "flash_messages.html" %}
    <head>
        <title>Books</title>
    </head>
    <div class="button-container">
        <h1>Borrow a Book!</h1>
        <h2>Find your next favorite page-turner here:</h2>
        
        <form action="/book/{{ username }}" method="GET">
            <input type="text" name="search" placeholder="Search for a title, author or category">
            <button type="submit">Search</button>
        </form>
    </div>
        {% if books|length == 0 %}
            <h2 style="margin-top: 5rem;">No books found!</h1>
        {% else %}
        <div class="table-responsive"></div>
        <table id="book" class="table">
            <thead>
              <tr>
                  <th>Book Title</th>
                  <th>Available copies</th>
              </tr>
            </thead>
            <tbody>
              {% for book in books %}
                  <tr>
                        <td><a class="button" onclick="window.location.href='/bookinfo/{{ username }}/{{ book.ISBN }}'">{{ book.title }}</a></td>
                        <td> {{ book.available_copies }} </td>
                  </tr>
              {% endfor %}
          </tbody>
          </table>
        {%endif%}
    </div>
</div>
{% endblock content %}