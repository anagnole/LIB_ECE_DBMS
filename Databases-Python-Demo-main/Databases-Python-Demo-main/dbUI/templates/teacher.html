{% extends "global_layout.html" %}
{% block content %}
<div class="container">
  {% include "flash_messages.html" %}
  <head>
      <title>Teacher Page</title>
  </head>
  <div>
      <h1>Welcome to the Teacher Page</h1>
      <div class="button-container">
        <button id="profile" onclick = "window.location.href='/teacher/profile/' + '{{username}}'">Profile</button>
        <button id="borrow" onclick="window.location.href='/book/' + '{{ username }}'">Browse Book Catalogue</button>
        <div class="card">
          {% if has == 1 %}
            <h3>Library Card</h3>
            <p><strong>Username:</strong> {{ username }}</p>
            <img class="profile-image" src="https://e7.pngegg.com/pngimages/349/288/png-clipart-teacher-education-student-course-school-avatar-child-face.png" alt="Profile Picture">
          {% else %}
            <h3>Unfortunately you do not own a library Card!</h3>
            <p>Please wait for approval from an operator.</p>
          {% endif %}
        </div>
      </div>
      <hr>
      <h2>Current Borrows</h2>
      {% if borrows|length == 0 %}
              <p style="margin-top: 5px;">No Borrows found!</p>
        {% else %}
      <div class="table-responsive">
      <table id="borrows" class="table">
          <thead>
            <tr>
                <th>Book Title</th>
                <th>Borrow Date</th>
                <th>Return</th>
            </tr>
          </thead>
          <tbody>
            {% for borrow in borrows %}
                <tr>
                    <td> {{ borrow.title }} </td>
                    <td> {{ borrow.b_date }} </td>
                    <td>
                      <form action="{{ url_for('bookinfo.returnbook', username=username, ISBN=borrow.ISBN) }}" method="POST">
                        <button type="submit" class="button">Return</button>
                      </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
        </table>
      </div>
      {%endif%}
      <hr>
  
      <h2>Current Reservations</h2>

        {% if reserves|length == 0 %}
            <p style="margin-top: 5px;">No Reservations found!</p>
        {% else %}
        <div class="table-responsive">
          <table id="reserves" class="table">
              <thead>
                <tr>
                    <th>Book Title</th>
                    <th>Reservation Date</th>
                    <th>Cancel Reservation</th>
                </tr>
              </thead>
              <tbody>
                {% for reserve in reserves %}
                    <tr>
                        <td> {{ reserve.title }} </td>
                        <td> {{ reserve.r_date }} </td>
                        <td>
                          <form action="{{ url_for('bookinfo.cancel', username=username, ISBN=reserve.ISBN) }}" method="POST">
                            <button type="submit" class="button">Cancel</button>
                          </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
            </table>
          </div>
          {% endif %}
      </div>
  </html>
  
</div>
{% endblock content %}